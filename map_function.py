#-*-coding:UTF-8-*-
#****************************************************************
# 关键词映射
# Author     : lujia
# Version    : 1.0
# Date       : 2017-02-07
# Description:
#****************************************************************
import json
import send_emails



def key_dict(AutoReply):
    keydict = {}
    for i in range(0, len(AutoReply)):
        tmp_dict = AutoReply[i]
        # print tmp_dict
        words = tmp_dict["words"]
        is_del=tmp_dict['del_time']
        tmp_reply=tmp_dict["reply_content"]
        reply_content_type=tmp_dict['reply_content_type']
        if type(words) == dict and is_del == '0':
            words = words.values()
        elif type(words)==list:
            pass
        elif words=='':
            continue
        else:
            print '该种关键词类型暂不支持--map_function'
            send_emails.send_failEmail(tmp_dict)
        if type(words)==list and is_del=='0':
            for i in range(0, len(words)):

                reply_content = {}
                re_key = words[i]
                # print re_key
                reply_content['reply_content']=tmp_reply
                reply_content['reply_content_type']=reply_content_type
                reply_content['MENUNAME'] = '关键词，非菜单'
                keydict[re_key] = reply_content
                # print '回复',reply_content['reply_content']
        else:
            print '获取关键词对应关系失败——map_function'


    dict_str=eval(json.dumps(keydict,ensure_ascii=False))
    # print dict_str
    return dict_str


def material_dict(material):
    materialdict = {}
    title = material['title']
    id = material["id"]
    is_del=material['is_del']
    if is_del=='N':
        if material['material_type']=='general-img-text':
            materialdict[id] = title
        elif material['material_type'] =='h5-img-text':
            materialdict[id] = title
        else:
            media_id = material["media_id"]
            materialdict[media_id]=id
    else:
        print '获取素材对应关系失败--map_function'
    dict_str=eval(json.dumps(materialdict,ensure_ascii=False))
    # print dict_str
    return dict_str



def menu_dict(menu):
    menudict = {}
    for i in range(0, len(menu)):
        tmp_dict = menu[i]
        menu_id=tmp_dict['id']
        menu_name=tmp_dict['menu_name']
        menu_key=tmp_dict['menu_key']
        menu_type=tmp_dict['menu_type']
        view_url=tmp_dict['view_url']
        reply_id=tmp_dict['reply_id']
        is_del=tmp_dict['is_del']
        if is_del=='N':
            if menu_type=='click':
                dict={}
                dict['MenuId'] = menu_id
                dict['Event'] = 'CLICK'
                # dict['is_del'] = is_del
                dict['reply_id'] = reply_id
                dict['EventKey']=menu_key
                dict['MENUNAME']=menu_name
                menudict[menu_key] = dict

            elif menu_type=='view':
                dict = {}
                dict['MenuId'] = menu_id
                dict['Event'] = 'VIEW'
                # dict['is_del'] = is_del
                dict['reply_id'] = reply_id
                dict['EventKey'] = view_url
                dict['MENUNAME'] = menu_name
                menudict[menu_key] = dict
            else:
                # print menu[i]
                send_emails.send_failEmail(tmp_dict)
        else:
            print '获取菜单对应关系失败--map_function'
    dict_str = eval(json.dumps(menudict, ensure_ascii=False))
    # print dict_str
    return dict_str











if __name__ == '__main__':
    # AutoReply = [
    #     {'up_time': '1485085179', 'tag_string': 0, 'is_open': '1', 'words': ['ewm', 'cds', 'ded', '你好'], 'id': '3433',
    #      'desc': 'ewmdesc', 'group_id': '-1', 'del_time': '1', 'reply_type': '4', 'match_degree': '1',
    #      'reply_content_type': '3', 'appid': 'wx15426e0b8f518593', 'add_time': '1485085140',
    #      'reply_content': '\xe6\x88\x91\xe6\x9c\x89\xe6\xb4\xbb'},  {'up_time': '1485085179', 'tag_string': 0, 'is_open': '1', 'words': ['aas', 'ghg', 'ww'], 'id': '3433',
    #      'desc': 'ewmdesc', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1',
    #      'reply_content_type': '1', 'appid': 'wx15426e0b8f518593', 'add_time': '1485085140',
    #      'reply_content': '\xe6\x88\x91\xe6\x9c\x89'}]
    # key_dict(AutoReply)
    AutoReply=[{'up_time': '1485399208', 'tag_string': '\xe7\xa5\x9d\xe7\xa6\x8f\xe7\xba\xa2\xe5\x8c\x85', 'is_open': '1', 'words': ['\xe7\xba\xa2', '\xe7\xba\xa2\xe5\x8c\x85', '\xe7\xa5\x9d\xe7\xa6\x8f', '\xe9\x80\x81'], 'id': '3443', 'add_time': '1485397433', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '2', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe7\xba\xa2\xe5\x8c\x85H5', 'reply_content': '\xe6\x96\xb0\xe5\xb9\xb4\xe6\x96\xb0\xe6\xb0\x94\xe8\xb1\xa1\xef\xbc\x8c\xe9\x80\x81\xe7\xa5\x9d\xe7\xa6\x8f\xe8\xbf\x98\xe6\x98\xaf\xe9\x80\x81\xe7\xba\xa2\xe5\x8c\x85\xe5\x91\xa2\xef\xbc\x9f\n\xe4\xb8\xa4\xe4\xb8\xaa\xe9\x83\xbd\xe6\x83\xb3\xe8\xa6\x81\xef\xbc\x8c\xe6\x83\xb3\xe8\xa6\x81\xef\xbc\x81\xe9\x83\xbd\xe6\x83\xb3\xe9\x80\x81\xef\xbc\x8c\xe6\x83\xb3\xe9\x80\x81\xef\xbc\x81\n\xe7\x8e\xb0\xe5\x9c\xa8\xe4\xb8\x80\xe8\xb5\xb7\xe6\x88\x90\xe5\x85\xa8\xe5\xa4\xa7\xe5\xae\xb6\xe7\x9a\x84\xe5\xbf\x83\xe6\x84\xbf\xef\xbc\x81\n\xe4\xb8\x80\xe8\xb5\xb7\xe6\x8a\x8a\xe7\xa5\x9d\xe7\xa6\x8f\xe5\xa1\x9e\xe8\xbf\x9b\xe7\xba\xa2\xe5\x8c\x85\xe9\x87\x8c\xe5\x90\xa7\xef\xbc\x81\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/MDRG741KmmI9Tqf-KIO6wg">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe7\xba\xa2\xe5\x8c\x85\xe3\x80\x91</a>\xef\xbc\x8c\xe8\xae\xa9\xe7\xa5\x9d\xe7\xa6\x8f\xe6\xbb\xa1\xe5\xa4\xa9\xe9\xa3\x9e\xef\xbc\x81[\xe5\x98\xb4\xe5\x94\x87]'}, {'up_time': '1485397965', 'tag_string': '\xe8\xbd\xa6\xe4\xb8\xbb,\xe7\x8e\xa9\xe6\xb3\x95\xe4\xba\x92\xe5\x8a\xa8', 'is_open': '1', 'words': ['\xe8\xbd\xa6\xe4\xb8\xbb\xe6\x9c\x89\xe7\xa4\xbc'], 'id': '682', 'add_time': '1481509766', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe8\xbd\xa6\xe4\xb8\xbb', 'reply_content': '\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/MDRG741KmmI9Tqf-KIO6wg">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe7\xba\xa2\xe5\x8c\x85\xe3\x80\x91</a>\xef\xbc\x8c\xe6\x96\xb0\xe5\xb9\xb4\xe5\xa4\xa7\xe7\xa4\xbc\xef\xbc\x8c\xe8\xae\xa9\xe7\xa5\x9d\xe7\xa6\x8f\xe6\xbb\xa1\xe5\xa4\xa9\xe9\xa3\x9e\xef\xbc\x81'}, {'up_time': '1480678028', 'tag_string': '\xe7\xa4\xbe\xe4\xba\xa4\xe5\xa8\xb1\xe4\xb9\x90', 'is_open': '1', 'words': ['\xe7\xa5\x9e\xe5\xa5\x87\xe5\x8a\xa8\xe7\x89\xa9'], 'id': '625', 'add_time': '1480678028', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe7\xa5\x9e\xe5\xa5\x87\xe5\x8a\xa8\xe7\x89\xa9\xe5\x9c\xa8\xe8\xbd\xa6\xe9\x87\x8c', 'reply_content': '\xe3\x80\x90\xe7\xa5\x9e\xe5\xa5\x87\xe5\x8a\xa8\xe7\x89\xa9\xe5\x9c\xa8\xe8\xbd\xa6\xe9\x87\x8c\xe3\x80\x91\xe6\xb4\xbb\xe5\x8a\xa8\xe5\x8f\x82\xe5\x8a\xa0\xe5\x9c\xb0\xe5\x9d\x80\xef\xbc\x9ahttp://form.mikecrm.com/gI0or4 \xe6\x9c\x9f\xe5\xbe\x85\xe4\xbd\xa0\xe7\x9a\x84\xe7\xa5\x9e\xe5\xa5\x87\xe4\xbd\x9c\xe5\x93\x81\xe5\x93\xa6\xef\xbc\x81'}, {'up_time': '1483595493', 'tag_string': '\xe7\x8e\xa9\xe6\xb3\x95\xe4\xba\x92\xe5\x8a\xa8,\xe5\xbc\x82\xe4\xb8\x9a\xe6\x8e\xa8\xe5\xb9\xbf', 'is_open': '1', 'words': {'1': '\xe5\xb9\xbf\xe5\x8f\x91'}, 'id': '570', 'add_time': '1480305692', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe5\xb9\xbf\xe5\x8f\x91\xe6\x9c\x89\xe7\xa4\xbc\xe4\xba\x92\xe6\x8e\xa8\xe6\xb4\xbb\xe5\x8a\xa8', 'reply_content': '\xe6\x81\xad\xe5\x96\x9c\xe4\xbd\xa0\xe5\xb7\xb2\xe6\x88\x90\xe5\x8a\x9f\xe5\x8f\x82\xe4\xb8\x8e\xe5\xb9\xbf\xe5\x8f\x91\xe6\x9c\x89\xe7\xb1\xb3\xe6\x90\xba\xe6\x89\x8b\xe4\xb8\x80\xe8\xb5\xb7\xe5\xa4\xa7\xe4\xbc\x97\xe7\x9a\x84\xe6\x84\x9f\xe6\x81\xa9\xe8\x8a\x82\xe8\x81\x94\xe5\x90\x88\xe6\xb4\xbb\xe5\x8a\xa8\xef\xbc\x81\xe4\xbd\xa0\xe7\x9a\x84\xe4\xbf\xa1\xe6\x81\xaf\xe5\xb7\xb2\xe8\xa2\xab\xe7\x99\xbb\xe8\xae\xb0\xef\xbc\x8c\xe4\xb8\xad\xe5\xa5\x96\xe5\x90\x8d\xe5\x8d\x95\xe5\xb0\x86\xe4\xba\x8e\xe6\xb4\xbb\xe5\x8a\xa8\xe7\xbb\x93\xe6\x9d\x9f\xe5\x90\x8e\xe7\x9a\x8410\xe4\xb8\xaa\xe5\xb7\xa5\xe4\xbd\x9c\xe6\x97\xa5\xe5\x86\x85\xe5\x9c\xa8\xe3\x80\x90\xe5\xb9\xbf\xe5\x8f\x91\xe6\x9c\x89\xe7\xb1\xb3\xe7\x9b\xb4\xe9\x94\x80\xe9\x93\xb6\xe8\xa1\x8c\xe3\x80\x91\xe8\xae\xa2\xe9\x98\x85\xe5\x8f\xb7\xe7\xbb\x9f\xe4\xb8\x80\xe5\x85\xac\xe5\xb8\x83\xef\xbc\x8c\xe6\x95\xac\xe8\xaf\xb7\xe7\x95\x99\xe6\x84\x8f\xe3\x80\x82'}, {'up_time': '1480305690', 'tag_string': '\xe6\xb4\xbb\xe5\x8a\xa8\xe6\x95\xb0\xe6\x8d\xae', 'is_open': '1', 'words': ['\xe5\xbf\xab\xe9\x97\xaa', '\xe8\xa7\x86\xe9\xa2\x91'], 'id': '569', 'add_time': '1480305690', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe5\xbf\xab\xe9\x97\xaa\xe8\xa7\x86\xe9\xa2\x91', 'reply_content': '\xe8\xbf\x99\xe9\x87\x8c\xe6\x9c\x89\xe4\xb8\xaa\xe7\x82\xab\xe5\x88\xb0\xe7\x88\x86\xe7\x82\xb8\xe7\x9a\x84\xe5\xbf\xab\xe9\x97\xaa\xe8\xa7\x86\xe9\xa2\x91\xef\xbc\x8c\xe6\x8b\xbf\xe8\xb5\xb0\xe4\xb8\x8d\xe8\xb0\xa2\xef\xbc\x8c\xe8\xaf\xb7\xe5\x8f\xab\xe6\x88\x91\xe9\x9b\xb7\xe9\x94\x8b\xef\xbc\x81\xe4\xb8\x8b\xe8\xbd\xbd\xe9\x93\xbe\xe6\x8e\xa5\xef\xbc\x9ahttp://share.weiyun.com/ff541e08522fbd2fb4a63baad992532d'}, {'up_time': '1485395229', 'tag_string': '\xe7\xa4\xbe\xe4\xba\xa4\xe5\xa8\xb1\xe4\xb9\x90,\xe5\xa4\xb4\xe5\x83\x8f\xe4\xba\x92\xe5\x8a\xa8', 'is_open': '1', 'words': ['\xe5\xa4\xb4\xe5\x83\x8f', '\xe5\xbe\xae\xe4\xbf\xa1\xe5\xa4\xb4\xe5\x83\x8f', '\xe8\xb6\xa3', '\xe8\x84\xb8'], 'id': '568', 'add_time': '1480305688', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe5\xa4\xa7\xe4\xbc\x97\xe5\xa4\xb4\xe5\x83\x8f', 'reply_content': '\xe3\x80\x90\xe4\xb8\x80\xe8\xb5\xb7\xe5\xa4\xa7\xe4\xbc\x97\xe3\x80\x91\xe5\xb0\xb1\xe6\x98\xaf\xe8\xa6\x81\xe7\x8e\xa9\xe8\xb5\xb7\xe6\x9d\xa5\xef\xbc\x81\n\xe6\x80\x8e\xe4\xb9\x88\xe7\x8e\xa9\xe6\x89\x8d\xe6\x9c\x80\xe7\x97\x9b\xe5\xbf\xab\xef\xbc\x9f\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/W4jr4JDa6g-u0CVsnw0KXQ?st_rand=1482500640">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe5\xa4\xb4\xe5\x83\x8f\xe3\x80\x91</a>\xef\xbc\x8c\xe7\x9f\xad\xe7\x9f\xad\xe5\x87\xa0\xe7\xa7\x92\xe5\xb0\xb1\xe5\x8f\xaf\xe8\x8e\xb7\xe5\xbe\x97\xe4\xb8\x93\xe5\xb1\x9e\xe5\xa4\xb4\xe5\x83\x8f\xef\xbc\x8c\xe5\xb8\x85\xe6\xb0\x94\xe5\xbf\x85\xe5\xa4\x87\xef\xbc\x81'}, {'up_time': '1480305683', 'tag_string': 0, 'is_open': '1', 'words': ['\xe6\xbc\x94\xe5\x87\xba\xe9\x97\xa8\xe7\xa5\xa8'], 'id': '566', 'add_time': '1480305683', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe6\xbc\x94\xe5\x87\xba', 'reply_content': '\xe3\x80\x90\xe6\xbc\x94\xe5\x87\xba\xe9\x97\xa8\xe7\xa5\xa8\xe3\x80\x91\xe6\xad\xa3\xe5\x9c\xa8\xe7\xad\xb9\xe5\x88\x92\xe4\xb8\xad\xef\xbc\x8c\xe5\x8d\xb3\xe5\xb0\x86\xe4\xb8\x8a\xe7\xba\xbf\xe5\x93\xa6~'}, {'up_time': '1485416490', 'tag_string': '\xe4\xba\x86\xe8\xa7\xa3\xe7\xa4\xbc\xe5\x93\x81', 'is_open': '1', 'words': ['\xe5\x85\x91\xe6\x8d\xa2', '\xe5\xa5\x96\xe5\x93\x81', '\xe8\xb4\xa7', '\xe5\xa5\x96\xe5\x8a\xb1', '\xe5\xa5\x96', '\xe9\xa2\x86\xe5\xa5\x96', '\xe7\xa4\xbc', '\xe5\x95\x86', '\xe7\xa9\xba', '\xe7\xa7\xaf\xe5\x88\x86\xe5\x95\x86\xe5\x9f\x8e', '\xe6\xb2\xa1', '\xe5\xba\x93\xe5\xad\x98'], 'id': '565', 'add_time': '1480305681', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '2', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe5\x85\x91\xe6\x8d\xa2\xe3\x80\x81\xe5\xa5\x96\xe5\x93\x81', 'reply_content': '\xe5\x96\x9c\xe5\xa4\xa7\xe6\x99\xae\xe5\xa5\x94\xef\xbc\x81\xe7\xa7\xaf\xe5\x88\x86\xe5\x95\x86\xe5\x9f\x8e\xe6\xad\xa3\xe5\x9c\xa8\xe6\x9b\xb4\xe6\x96\xb0\xe4\xb8\xad\xe5\x95\xa6\xef\xbc\x81\xe6\x9b\xb4\xe5\xa4\x9a\xe7\xb2\xbe\xe5\xbd\xa9\xe6\xb4\xbb\xe5\x8a\xa8\xef\xbc\x8c\xe6\x95\xac\xe8\xaf\xb7\xe6\x9c\x9f\xe5\xbe\x85\xef\xbc\x81\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/MDRG741KmmI9Tqf-KIO6wg">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe7\xba\xa2\xe5\x8c\x85\xe3\x80\x91</a>\xef\xbc\x8c\xe6\x96\xb0\xe5\xb9\xb4\xe5\xa4\xa7\xe7\xa4\xbc\xef\xbc\x8c\xe8\xae\xa9\xe7\xa5\x9d\xe7\xa6\x8f\xe6\xbb\xa1\xe5\xa4\xa9\xe9\xa3\x9e\xef\xbc\x81\n\xe6\xb4\xbb\xe5\x8a\xa8\xe9\x99\x86\xe7\xbb\xad\xe4\xb8\x8a\xe6\x96\xb0\xef\xbc\x8c\xe7\x82\xb9\xe5\x87\xbb<a href="http://biz.social-touch.com/spread/spread/tasklist?uid=4903&wx_system_id=922">\xe3\x80\x90\xe6\x9c\x80\xe6\x96\xb0\xe6\xb4\xbb\xe5\x8a\xa8\xe3\x80\x91</a>\xe9\xa2\x86\xe5\x8f\x96\xe6\x9b\xb4\xe5\xa4\x9a\xe7\xa7\xaf\xe5\x88\x86\xe5\x90\xa7\xef\xbc\x81'}, {'up_time': '1485397939', 'tag_string': '\xe7\x8e\xa9\xe6\xb3\x95\xe4\xba\x92\xe5\x8a\xa8', 'is_open': '1', 'words': ['\xe7\x8e\xa9\xe6\xb3\x95', '\xe7\x8e\xa9\xe8\xb5\x9a\xe7\xa7\xaf\xe5\x88\x86', '\xe6\x80\x8e\xe4\xb9\x88\xe7\x8e\xa9', '\xe7\xa7\xaf\xe5\x88\x86', '\xe7\x8e\xa9\xe8\xbd\xac\xe7\xa7\xaf\xe5\x88\x86', '\xe4\xbb\xbb\xe5\x8a\xa1', '\xe6\xb4\xbb\xe5\x8a\xa8', '\xe7\x8e\xa9'], 'id': '564', 'add_time': '1480305679', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '2', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe7\xa7\xaf\xe5\x88\x86\xe3\x80\x81\xe4\xbb\xbb\xe5\x8a\xa1\xe3\x80\x81\xe6\xb4\xbb\xe5\x8a\xa8', 'reply_content': '\xe5\xb0\x8f\xe7\xbc\x96\xe6\x9c\x89\xe8\xaf\x9d\xe8\xaf\xb4[\xe5\xae\xb3\xe7\xbe\x9e]\xef\xbc\x8c\xe5\x8f\x82\xe4\xb8\x8e\xe6\xb4\xbb\xe5\x8a\xa8\xe5\x8d\xb3\xe5\x8f\xaf\xe8\x8e\xb7\xe5\x8f\x96\xe7\xa7\xaf\xe5\x88\x86\xe5\xa5\x96\xe5\x8a\xb1\xef\xbc\x81\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/MDRG741KmmI9Tqf-KIO6wg">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe7\xba\xa2\xe5\x8c\x85\xe3\x80\x91</a>\xef\xbc\x8c\xe6\x96\xb0\xe5\xb9\xb4\xe5\xa4\xa7\xe7\xa4\xbc\xef\xbc\x8c\xe8\xae\xa9\xe7\xa5\x9d\xe7\xa6\x8f\xe6\xbb\xa1\xe5\xa4\xa9\xe9\xa3\x9e\xef\xbc\x81\n\xe6\x8b\xa5\xe6\x9c\x89\xe8\xb6\xb3\xe9\x87\x8f\xe7\xa7\xaf\xe5\x88\x86\xe5\x8f\xaf\xe5\x89\x8d\xe5\xbe\x80\xe7\xa7\xaf\xe5\x88\x86\xe5\x95\x86\xe5\x9f\x8e\xe5\x85\x91\xe6\x8d\xa2\xe5\xa5\x96\xe5\x93\x81\xef\xbc\x8c\xe7\xa7\xaf\xe5\x88\x86\xe8\xb6\x8a\xe9\xab\x98\xe5\xa5\x96\xe5\x8a\xb1\xe8\xb6\x8a\xe9\xab\x98\xef\xbc\x81\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://app.biz.social-touch.com/material/read/index?new_id=46733&wx_id=922">\xe3\x80\x90\xe7\x8e\xa9\xe8\xbd\xac\xe7\xa7\xaf\xe5\x88\x86\xe3\x80\x91</a>\xe6\x9f\xa5\xe7\x9c\x8b\xe7\xa7\xaf\xe5\x88\x86\xe7\x8e\xa9\xe6\xb3\x95\xef\xbc\x8c\xe7\x82\xb9\xe5\x87\xbb<a href="http://biz.social-touch.com/spread/spread/tasklist?uid=4903&wx_system_id=922">\xe3\x80\x90\xe6\x9c\x80\xe6\x96\xb0\xe6\xb4\xbb\xe5\x8a\xa8\xe3\x80\x91</a>\xe5\x8f\xaf\xe9\xa2\x86\xe5\x8f\x96\xe6\x9b\xb4\xe5\xa4\x9a\xe7\xa7\xaf\xe5\x88\x86\xe5\x93\xa6\xef\xbc\x81'}, {'up_time': '1485397926', 'tag_string': '\xe7\x8e\xa9\xe6\xb3\x95\xe4\xba\x92\xe5\x8a\xa8', 'is_open': '1', 'words': ['\xe4\xbc\x9a\xe5\x91\x98', '\xe4\xbd\xa0\xe5\xa5\xbd', '\xe5\x97\xa8', '\xe6\x9c\x89\xe4\xba\xba\xe5\x90\x97', '\xe5\x9c\xa8\xe5\x90\x97', '\xe5\x93\x88'], 'id': '563', 'add_time': '1480305677', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '2', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe4\xbc\x9a\xe5\x91\x98\xe3\x80\x81\xe5\xb8\xb8\xe8\xa7\x84', 'reply_content': '\xe5\xb0\x8f\xe7\xbc\x96\xe9\x9d\x99\xe9\x9d\x99\xe5\x9c\xb0\xe6\x9d\xa5\xe5\x95\xa6\xef\xbc\x81\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/MDRG741KmmI9Tqf-KIO6wg">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe7\xba\xa2\xe5\x8c\x85\xe3\x80\x91</a>\xef\xbc\x8c\xe6\x96\xb0\xe5\xb9\xb4\xe5\xa4\xa7\xe7\xa4\xbc\xef\xbc\x8c\xe8\xae\xa9\xe7\xa5\x9d\xe7\xa6\x8f\xe6\xbb\xa1\xe5\xa4\xa9\xe9\xa3\x9e\xef\xbc\x81\n\xe4\xb8\x80\xe8\xb5\xb7\xe7\x8e\xa9\xe8\xbd\xac\xe5\xb1\x9e\xe4\xba\x8e\xe6\x88\x91\xe4\xbb\xac\xe5\xa4\xa7\xe4\xbc\x97\xe7\x9a\x84\xe8\xbd\xa6\xe7\x94\x9f\xe6\xb4\xbb\xe5\x90\xa7\xef\xbc\x81\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://app.biz.social-touch.com/material/read/index?new_id=46733&wx_id=922">\xe3\x80\x90\xe7\x8e\xa9\xe8\xbd\xac\xe7\xa7\xaf\xe5\x88\x86\xe3\x80\x91</a>\xe5\x8f\xaf\xe6\x9f\xa5\xe7\x9c\x8b\xe7\xa7\xaf\xe5\x88\x86\xe7\x8e\xa9\xe6\xb3\x95\xef\xbc\x8c\xe7\x82\xb9\xe5\x87\xbb<a href="http://biz.social-touch.com/spread/spread/tasklist?uid=4903&wx_system_id=922">\xe3\x80\x90\xe6\x9c\x80\xe6\x96\xb0\xe6\xb4\xbb\xe5\x8a\xa8\xe3\x80\x91</a>\xe5\x8f\xaf\xe9\xa2\x86\xe5\x8f\x96\xe6\x9b\xb4\xe5\xa4\x9a\xe7\xa7\xaf\xe5\x88\x86\xe5\x93\xa6\xef\xbc\x81'}, {'up_time': '1485397915', 'tag_string': '\xe4\xba\x86\xe8\xa7\xa3\xe8\xbd\xa6\xe8\xae\xaf,\xe8\xbd\xa6\xe4\xb8\xbb', 'is_open': '1', 'words': ['\xe5\xae\xa2\xe6\x9c\x8d', '\xe4\xbb\xb7\xe6\xa0\xbc', '\xe8\xbd\xa6', '\xe8\xbd\xa6\xe5\x9e\x8b', '\xe8\xbf\x88\xe8\x85\xbe', '\xe9\x80\x9f\xe8\x85\xbe', '\xe5\xae\x9d\xe6\x9d\xa5', '\xe9\xab\x98\xe5\xb0\x94\xe5\xa4\xab', '\xe5\x98\x89\xe6\x97\x85', 'CC', '\xe6\x8d\xb7\xe8\xbe\xbe', '\xe4\xbb\xb7', '\xe6\x8a\xa5\xe4\xbb\xb7', '\xe8\x94\x9a\xe9\xa2\x86'], 'id': '562', 'add_time': '1480305675', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe5\xae\xa2\xe6\x9c\x8d\xe3\x80\x81\xe8\xbd\xa6\xe5\x9e\x8b', 'reply_content': '\xe7\xbb\x88\xe4\xba\x8e\xe7\xad\x89\xe5\x88\xb0\xe6\x82\xa8\xef\xbc\x8c\xe6\x84\x9f\xe8\xb0\xa2\xe6\x82\xa8\xe5\x85\xb3\xe6\xb3\xa8\xe3\x80\x90\xe4\xb8\x80\xe8\xb5\xb7\xe5\xa4\xa7\xe4\xbc\x97\xe3\x80\x91\xef\xbc\x81\n\xe8\xbd\xa6\xe5\x9e\x8b\xe6\x8a\xa5\xe4\xbb\xb7\xe3\x80\x81\xe6\x9c\x80\xe6\x96\xb0\xe4\xbc\x98\xe6\x83\xa0\xe8\xaf\xb7\xe7\x82\xb9\xe5\x87\xbb<a href="http://demogz.app.social-touch.com/faw-vw/">\xe3\x80\x90\xe6\x88\x91\xe8\xa6\x81\xe4\xb9\xb0\xe8\xbd\xa6\xe3\x80\x91</a>\xef\xbc\x9b\n\xe7\x82\xb9\xe5\x87\xbb<a href="http://mp.weixin.qq.com/s/MDRG741KmmI9Tqf-KIO6wg">\xe3\x80\x90\xe5\xa4\xa7\xe4\xbc\x97\xe7\xba\xa2\xe5\x8c\x85\xe3\x80\x91</a>\xef\xbc\x8c\xe6\x96\xb0\xe5\xb9\xb4\xe5\xa4\xa7\xe7\xa4\xbc\xef\xbc\x8c\xe8\xae\xa9\xe7\xa5\x9d\xe7\xa6\x8f\xe6\xbb\xa1\xe5\xa4\xa9\xe9\xa3\x9e\xef\xbc\x81\n\xe7\xa7\xaf\xe5\x88\x86\xe3\x80\x81\xe5\x95\x86\xe5\x9f\x8e\xe3\x80\x81\xe6\xb4\xbb\xe5\x8a\xa8\xe8\xaf\xb7\xe7\x82\xb9\xe5\x87\xbb<a href="http://app.biz.social-touch.com/material/read/index?new_id=46733&wx_id=922">\xe3\x80\x90\xe7\x8e\xa9\xe6\xb3\x95\xe3\x80\x91</a>\xef\xbc\x8c\xe4\xbc\x9a\xe6\x9c\x89\xe6\x83\x8a\xe5\x96\x9c\xe7\x9b\xb8\xe9\x80\x81\xe5\x93\xa6\xef\xbc\x81\n\xe4\xb8\x80\xe8\xb5\xb7\xe5\xa4\xa7\xe4\xbc\x97\xef\xbc\x8c\xe7\x8e\xa9\xe8\xb5\xb7\xe6\x9d\xa5\xef\xbc\x81[\xe6\xbf\x80\xe5\x8a\xa8]'}, {'up_time': '1480305673', 'tag_string': 0, 'is_open': '1', 'words': ['\xe5\x86\x85\xe9\x83\xa8', 'C\xe4\xbc\x9a\xe5\x91\x98', 'C', '\xe5\x91\x98\xe5\xb7\xa5'], 'id': '561', 'add_time': '1480305673', 'group_id': '-1', 'del_time': '0', 'reply_type': '4', 'match_degree': '1', 'reply_content_type': '1', 'tag_id_string': '', 'appid': 'wxb0c46bde58a8bf34', 'desc': '\xe5\x86\x85\xe9\x83\xa8\xe5\x91\x98\xe5\xb7\xa5\xe7\xaa\x97\xe5\x8f\xa3', 'reply_content': '\xe8\xaf\xb7\xe7\x82\xb9\xe5\x87\xbb<a href="http://app.biz.social-touch.com/svip/employee/index?pf_uid=4903_922&pf_type=3">\xe3\x80\x90C\xe4\xbc\x9a\xe5\x91\x98\xe3\x80\x91</a>\xef\xbc\x8c\xe5\x8f\xaf\xe5\xbf\xab\xe9\x80\x9f\xe8\xbf\x9b\xe5\x85\xa5C\xe4\xbc\x9a\xe5\x91\x98\xe9\x80\x9a\xe9\x81\x93\xef\xbc\x81'}]
    key_dict(AutoReply)



    # material={"id": "206454", "app_id": "wx15426e0b8f518593", "creation_time": "1485334664", "last_update_time": "1485334664",
    #   "group_id": "0", "media_id": "wk1SZz5kUDYJOp56kxGLmfdNu1RzJ7ngXOxVCrVPZu4",
    #   "qn_file_id": "c8cc17b842051fc57a25f3659e847ede", "title": "general-img-text",
    #   "introduction": "33333333333333333333333", "material_type": "general-img-text", "is_many": "N", "is_sync": "N",
    #   "content_type": "text", "is_del": "N", "qn_thmub_image_id": "", "use_times": "0", "wx_url": 'null',
    #   "file_time_long": 'null', "file_size": "0"}
    # material_dict(material)
    # menu=[{"id": "4518","appid": "wx15426e0b8f518593","menu_name": "菜单","menu_key": "Spa5MqlIKfCl14605281020723","menu_type": "view","parent_id": "0","view_url": "http://app.biz.social-touch.com/svip/employee/index?`pf_uid`=2351_614&`pf_type`=3","reply_id": "751","pos": "1","creation_time": "1460362041","last_update_time": "1486373537","is_del": "N"},{"id": "7340","appid": "wx15426e0b8f518593","menu_name": "一级菜单","menu_key": "HLIWYRBIXSFW14712493296737","menu_type": "click","parent_id": "0","view_url": "","reply_id": "607","pos": "3","creation_time": "1471249329","last_update_time": "1486373537","is_del": "N"}]
    # menu_dict(menu)